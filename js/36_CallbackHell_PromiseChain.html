<!DOCTYPE html>
<html lang="en">
	<head>
		<title>callback Hell & Promise Chain Ex.</title>
	</head>
	<body>
		<h1>Open Console on Browser ( Press F12 )</h1>

		<script>
			// CallBack Hell
			const getTodos = (resource, callback) => {
				console.log("Callback Hell ðŸ”¥");
				const request = new XMLHttpRequest();
				request.addEventListener("readystatechange", () => {
					if (request.readyState == 4 && request.status == 200) {
						const data = JSON.parse(request.responseText);
						callback(undefined, data);
					} else if (request.readyState == 4) {
						callback("Could not Fetch the data", undefined);
					}
				});
				request.open("GET", resource, true);
				request.send();
			};
			getTodos("https://reqres.in/api/users/1", (err, data) => {
				console.log("Callback - 1 ", data);
				getTodos("https://reqres.in/api/users/2", (err, data) => {
					console.log("Callback - 2 ", data);
					getTodos("https://reqres.in/api/users/3", (err, data) => {
						console.log("Callback - 3 ", data);
					});
				});
			});

			// Promise Chaining
			const getTodos1 = (resource) => {
				console.log("Promise Chaining â¤ï¸");
				return new Promise((resolve, reject) => {
					const request = new XMLHttpRequest();
					request.addEventListener("readystatechange", () => {
						if (request.readyState == 4 && request.status == 200) {
							const data = JSON.parse(request.responseText);
							resolve(data);
						} else if (request.readyState == 4) {
							reject("Could not Fetch the data");
						}
					});
					request.open("GET", resource, true);
					request.send();
				});
			};
			getTodos1("https://reqres.in/api/users/4")
				.then((data) => {
					console.log("Promise - 1 Resolve", data);
					return getTodos1("https://reqres.in/api/users/5");
				})
				.then((data) => {
					console.log("Promise - 2 Resolve", data);
					return getTodos1("https://reqres.in/api/users/6");
				})
				.then((data) => {
					console.log("Promise - 3 Resolve", data);
				})
				.catch((err) => console.log("Promise Reject", err));
		</script>
	</body>
</html>
